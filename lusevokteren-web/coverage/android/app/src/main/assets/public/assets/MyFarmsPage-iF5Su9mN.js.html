
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for android/app/src/main/assets/public/assets/MyFarmsPage-iF5Su9mN.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../../index.html">All files</a> / <a href="index.html">android/app/src/main/assets/public/assets</a> MyFarmsPage-iF5Su9mN.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/20</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/20</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >import{a as L,r as c,j as e}from"./index-Cv4P48Md.js";import{i as F,l as I,h as W,r as N,M as E,T as $,A as B,P as C,D,B as k}from"./leaflet-DUoRppxf.js";const A=F(function({position:o,...n},i){const d=new I.Marker(o,n);return W(d,N(i,{overlayContainer:d}))},function(o,n,i){n.position!==i.position&amp;&amp;o.setLatLng(n.position),n.icon!=null&amp;&amp;n.icon!==i.icon&amp;&amp;o.setIcon(n.icon),n.zIndexOffset!=null&amp;&amp;n.zIndexOffset!==i.zIndexOffset&amp;&amp;o.setZIndexOffset(n.zIndexOffset),n.opacity!=null&amp;&amp;n.opacity!==i.opacity&amp;&amp;o.setOpacity(n.opacity),o.dragging!=null&amp;&amp;n.draggable!==i.draggable&amp;&amp;(n.draggable===!0?o.dragging.enable():o.dragging.disable())}),O="http://localhost:3000",T=({onSubmit:r,onCancel:o})=&gt;{const{t:n}=L(),[i,d]=c.useState({name:"",orgNumber:"",contactName:"",contactEmail:""}),[g,h]=c.useState(!1),[b,f]=c.useState(null),u=async l=&gt;{l.preventDefault(),h(!0),f(null);try{const p=await fetch(`${O}/api/companies`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:i.name,org_number:i.orgNumber,contact_name:i.contactName,contact_email:i.contactEmail})});if(!p.ok){const s=await p.json();throw new Error(s.error||"Kunne ikke registrere selskap")}const j=await p.json();r==null||r(j.company)}catch(p){f(p.message)}finally{h(!1)}};return e.jsxs("div",{style:{maxWidth:"500px",margin:"0 auto",padding:"24px",backgroundColor:"var(--card-bg, white)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("h2",{style:{marginBottom:"24px",color:"var(--text, #1e3a5f)"},children:"Registrer ditt selskap"}),b&amp;&amp;e.jsx("div",{style:{padding:"12px",marginBottom:"16px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"14px"},children:b}),e.jsxs("form",{onSubmit:u,children:[e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"14px"},children:"Selskapsnavn *"}),e.jsx("input",{type:"text",value:i.name,onChange:l=&gt;d({...i,name:l.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border, #ddd)",fontSize:"14px",background:"var(--bg, white)",color:"var(--text, #333)"},placeholder:"F.eks. Fjordlaks AS"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"14px"},children:"Organisasjonsnummer"}),e.jsx("input",{type:"text",value:i.orgNumber,onChange:l=&gt;d({...i,orgNumber:l.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border, #ddd)",fontSize:"14px",background:"var(--bg, white)",color:"var(--text, #333)"},placeholder:"912 345 678"})]}),e.jsxs("div",{style:{marginBottom:"16px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"14px"},children:"Kontaktperson"}),e.jsx("input",{type:"text",value:i.contactName,onChange:l=&gt;d({...i,contactName:l.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border, #ddd)",fontSize:"14px",background:"var(--bg, white)",color:"var(--text, #333)"},placeholder:"Ola Nordmann"})]}),e.jsxs("div",{style:{marginBottom:"24px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"6px",fontWeight:"600",fontSize:"14px"},children:"E-post *"}),e.jsx("input",{type:"email",value:i.contactEmail,onChange:l=&gt;d({...i,contactEmail:l.target.value}),required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border, #ddd)",fontSize:"14px",background:"var(--bg, white)",color:"var(--text, #333)"},placeholder:"ola@fjordlaks.no"})]}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[o&amp;&amp;e.jsx("button",{type:"button",onClick:o,style:{flex:1,padding:"14px",backgroundColor:"var(--bg, #f5f5f5)",color:"var(--text, #333)",border:"1px solid var(--border, #ddd)",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:"Avbryt"}),e.jsx("button",{type:"submit",disabled:g,style:{flex:1,padding:"14px",backgroundColor:g?"#93c5fd":"#1976d2",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:g?"not-allowed":"pointer"},children:g?"Registrerer...":"Registrer selskap"})]})]})]})},R="http://localhost:3000",_=({onSelectLocality:r,companyId:o})=&gt;{const[n,i]=c.useState(""),[d,g]=c.useState([]),[h,b]=c.useState(!1),[f,u]=c.useState(null),[l,p]=c.useState(null),j=async()=&gt;{if(n.length&lt;2){u("Skriv minst 2 tegn for a soke");return}b(!0),u(null);try{const t=await fetch(`${R}/api/barentswatch/search?q=${encodeURIComponent(n)}`);if(!t.ok)throw new Error("Kunne ikke soke etter lokaliteter");const a=await t.json();g(a),a.length===0&amp;&amp;u("Ingen resultater funnet")}catch(t){u(t.message)}finally{b(!1)}},s=async t=&gt;{if(!o){u("Du ma velge et selskap forst");return}p(t.localityNo);try{const a=await fetch(`${R}/api/user-localities`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({company_id:o,locality_no:t.localityNo,name:t.name,latitude:t.latitude,longitude:t.longitude,municipality:t.municipality})});if(!a.ok){const m=await a.json();throw new Error(m.error||"Kunne ikke legge til lokalitet")}const x=await a.json();r==null||r(x.locality),g(d.filter(m=&gt;m.localityNo!==t.localityNo))}catch(a){u(a.message)}finally{p(null)}},v=t=&gt;t==null?"#3399ff":t&gt;=.1?"#f44336":t&gt;=.08?"#ff9800":"#4CAF50",y=t=&gt;t==null?"Ikke rapportert":t&gt;=.1?"FARE":t&gt;=.08?"ADVARSEL":"OK";return e.jsxs("div",{style:{maxWidth:"600px",margin:"0 auto",padding:"24px",backgroundColor:"var(--card-bg, white)",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},children:[e.jsx("h2",{style:{marginBottom:"24px",color:"var(--text, #1e3a5f)"},children:"Legg til anlegg"}),f&amp;&amp;e.jsx("div",{style:{padding:"12px",marginBottom:"16px",backgroundColor:"#fee2e2",border:"1px solid #fecaca",borderRadius:"8px",color:"#dc2626",fontSize:"14px"},children:f}),e.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"24px"},children:[e.jsx("input",{type:"text",value:n,onChange:t=&gt;i(t.target.value),onKeyPress:t=&gt;t.key==="Enter"&amp;&amp;j(),placeholder:"Sok etter lokalitetsnavn eller nummer...",style:{flex:1,padding:"12px 16px",borderRadius:"8px",border:"1px solid var(--border, #ddd)",fontSize:"14px",background:"var(--bg, white)",color:"var(--text, #333)"}}),e.jsx("button",{onClick:j,disabled:h,style:{padding:"12px 24px",backgroundColor:h?"#93c5fd":"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:h?"not-allowed":"pointer",fontWeight:"600",fontSize:"14px"},children:h?"Soker...":"Sok"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[d.map(t=&gt;{var a,x;return e.jsx("div",{style:{padding:"16px",border:"2px solid var(--border, #e0e0e0)",borderRadius:"8px",backgroundColor:"var(--bg, #fafafa)"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:"0 0 8px 0",color:"var(--text, #1e3a5f)"},children:t.name}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--muted, #666)",fontSize:"14px"},children:[e.jsx("strong",{children:"Lokalitetsnr:"})," ",t.localityNo]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--muted, #666)",fontSize:"14px"},children:[e.jsx("strong",{children:"Kommune:"})," ",t.municipality]}),e.jsxs("p",{style:{margin:"4px 0",color:"var(--muted, #666)",fontSize:"14px"},children:[e.jsx("strong",{children:"Koordinater:"})," ",(a=t.latitude)==null?void 0:a.toFixed(4),"N, ",(x=t.longitude)==null?void 0:x.toFixed(4),"E"]}),t.avgAdultFemaleLice!==null&amp;&amp;t.avgAdultFemaleLice!==void 0&amp;&amp;e.jsxs("p",{style:{margin:"8px 0 0 0",fontSize:"14px"},children:[e.jsx("strong",{children:"Luseniva:"})," ",e.jsxs("span",{style:{padding:"2px 8px",borderRadius:"4px",backgroundColor:v(t.avgAdultFemaleLice),color:"white",fontWeight:"600"},children:[t.avgAdultFemaleLice.toFixed(2)," (",y(t.avgAdultFemaleLice),")"]})]}),t.company&amp;&amp;e.jsxs("p",{style:{margin:"4px 0",color:"var(--muted, #666)",fontSize:"13px"},children:[e.jsx("strong",{children:"Registrert pa:"})," ",t.company]})]}),e.jsx("button",{onClick:()=&gt;s(t),disabled:l===t.localityNo||!o,style:{padding:"10px 20px",backgroundColor:l===t.localityNo?"#9ca3af":"#4CAF50",color:"white",border:"none",borderRadius:"6px",cursor:l===t.localityNo||!o?"not-allowed":"pointer",fontWeight:"600",fontSize:"13px",opacity:o?1:.5},children:l===t.localityNo?"Legger til...":"+ Legg til"})]})},t.localityNo)}),d.length===0&amp;&amp;n&amp;&amp;!h&amp;&amp;!f&amp;&amp;e.jsx("p",{style:{textAlign:"center",color:"var(--muted, #999)"},children:"Ingen resultater funnet. Prov et annet sokeord."})]}),!o&amp;&amp;e.jsx("div",{style:{marginTop:"16px",padding:"12px",backgroundColor:"#fef3c7",border:"1px solid #fcd34d",borderRadius:"8px",color:"#92400e",fontSize:"13px"},children:"Du ma registrere et selskap for du kan legge til anlegg."})]})},M="http://localhost:3000";delete k.Icon.Default.prototype._getIconUrl;k.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});function K({center:r,zoom:o}){const n=D();return c.useEffect(()=&gt;{r&amp;&amp;n.setView(r,o)},[r,o,n]),null}const U=({userLocalities:r=[],companyId:o})=&gt;{const[n,i]=c.useState([]),[d,g]=c.useState(!0),[h,b]=c.useState(10),[f,u]=c.useState(!1),l=c.useMemo(()=&gt;{if(r.length===0)return[62,6];const t=r.reduce((x,m)=&gt;x+parseFloat(m.latitude),0)/r.length,a=r.reduce((x,m)=&gt;x+parseFloat(m.longitude),0)/r.length;return[t,a]},[r]);c.useEffect(()=&gt;{(async()=&gt;{if(!d||r.length===0){i([]);return}u(!0);try{const a=await fetch(`${M}/api/barentswatch/nearby?lat=${l[0]}&amp;lng=${l[1]}&amp;radius=${h}`);if(!a.ok)throw new Error("Kunne ikke hente omradedata");const x=await a.json(),m=r.map(S=&gt;parseInt(S.locality_no)),z=x.filter(S=&gt;!m.includes(S.localityNo));i(z)}catch(a){console.error("Feil ved henting av omrade-data:",a)}finally{u(!1)}})()},[l,h,d,r]);const p=t=&gt;t==null?"#3399ff":t&gt;=.1?"#f44336":t&gt;=.08?"#ff9800":"#4CAF50",j=t=&gt;t==null?"Ikke rapportert":t&gt;=.1?"FARE":t&gt;=.08?"ADVARSEL":"OK",s=c.useMemo(()=&gt;{const t=[...n],a=t.filter(x=&gt;x.avgAdultFemaleLice!==null&amp;&amp;x.avgAdultFemaleLice!==void 0);return{total:t.length,ok:a.filter(x=&gt;x.avgAdultFemaleLice&lt;.08).length,warning:a.filter(x=&gt;x.avgAdultFemaleLice&gt;=.08&amp;&amp;x.avgAdultFemaleLice&lt;.1).length,danger:a.filter(x=&gt;x.avgAdultFemaleLice&gt;=.1).length,average:a.length&gt;0?(a.reduce((x,m)=&gt;x+m.avgAdultFemaleLice,0)/a.length).toFixed(3):"N/A"}},[n]),v=t=&gt;k.divIcon({className:"custom-marker",html:`</span></span></span>
<span class="cstat-no" title="statement not covered" >        &lt;div style="</span>
<span class="cstat-no" title="statement not covered" >          width: 30px;</span>
<span class="cstat-no" title="statement not covered" >          height: 30px;</span>
<span class="cstat-no" title="statement not covered" >          background-color: ${p(t)};</span>
<span class="cstat-no" title="statement not covered" >          border: 4px solid #1e3a5f;</span>
<span class="cstat-no" title="statement not covered" >          border-radius: 50%;</span>
<span class="cstat-no" title="statement not covered" >          box-shadow: 0 3px 8px rgba(0,0,0,0.4);</span>
<span class="cstat-no" title="statement not covered" >        "&gt;&lt;/div&gt;</span>
<span class="cstat-no" title="statement not covered" >      `,iconSize:[30,30],iconAnchor:[15,15]}),y=t=&gt;k.divIcon({className:"custom-marker",html:`</span>
<span class="cstat-no" title="statement not covered" >        &lt;div style="</span>
<span class="cstat-no" title="statement not covered" >          width: 18px;</span>
<span class="cstat-no" title="statement not covered" >          height: 18px;</span>
<span class="cstat-no" title="statement not covered" >          background-color: ${p(t)};</span>
<span class="cstat-no" title="statement not covered" >          border: 2px solid white;</span>
<span class="cstat-no" title="statement not covered" >          border-radius: 50%;</span>
<span class="cstat-no" title="statement not covered" >          box-shadow: 0 2px 4px rgba(0,0,0,0.3);</span>
<span class="cstat-no" title="statement not covered" >          opacity: 0.9;</span>
<span class="cstat-no" title="statement not covered" >        "&gt;&lt;/div&gt;</span>
<span class="cstat-no" title="statement not covered" >      `,iconSize:[18,18],iconAnchor:[9,9]});return e.jsxs("div",{style:{position:"relative",height:"100%",width:"100%"},children:[e.jsxs(E,{center:l,zoom:r.length&gt;0?10:6,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[e.jsx(K,{center:l,zoom:r.length&gt;0?10:6}),e.jsx($,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:"¬© OpenStreetMap contributors"}),d&amp;&amp;r.length&gt;0&amp;&amp;e.jsx(B,{center:l,radius:h*1e3,pathOptions:{color:"#1976d2",fillColor:"#1976d2",fillOpacity:.05,weight:2,dashArray:"5, 10"}}),r.map(t=&gt;{var a;return e.jsx(A,{position:[parseFloat(t.latitude),parseFloat(t.longitude)],icon:v(t.avgAdultFemaleLice),children:e.jsx(C,{children:e.jsxs("div",{style:{minWidth:"250px"},children:[e.jsxs("div",{style:{background:"#1e3a5f",color:"white",padding:"12px",margin:"-12px -12px 12px -12px",borderRadius:"4px 4px 0 0"},children:[e.jsx("h3",{style:{margin:0,fontSize:"16px"},children:t.name}),e.jsx("small",{children:"Ditt anlegg"})]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lokalitetsnr:"})," ",t.locality_no]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kommune:"})," ",t.municipality]}),e.jsxs("div",{style:{backgroundColor:`${p(t.avgAdultFemaleLice)}22`,padding:"12px",borderRadius:"6px",borderLeft:`4px solid ${p(t.avgAdultFemaleLice)}`,marginTop:"12px"},children:[e.jsx("p",{style:{margin:"0 0 4px 0"},children:e.jsx("strong",{children:"Luseniva:"})}),e.jsxs("p",{style:{margin:0,fontSize:"20px",fontWeight:"bold",color:p(t.avgAdultFemaleLice)},children:[((a=t.avgAdultFemaleLice)==null?void 0:a.toFixed(3))||"Ikke registrert",e.jsx("span",{style:{fontSize:"14px",marginLeft:"8px"},children:j(t.avgAdultFemaleLice)})]})]})]})})},`user-${t.id}`)}),d&amp;&amp;n.map(t=&gt;{var a;return e.jsx(A,{position:[t.latitude,t.longitude],icon:y(t.avgAdultFemaleLice),children:e.jsx(C,{children:e.jsxs("div",{style:{minWidth:"220px"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0",color:"#333"},children:t.name}),e.jsxs("p",{children:[e.jsx("strong",{children:"Lokalitetsnr:"})," ",t.localityNo]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Kommune:"})," ",t.municipality]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Selskap:"})," ",t.company||"Ukjent"]}),e.jsx("div",{style:{backgroundColor:`${p(t.avgAdultFemaleLice)}22`,padding:"10px",borderRadius:"6px",borderLeft:`4px solid ${p(t.avgAdultFemaleLice)}`,marginTop:"12px"},children:e.jsxs("p",{style:{margin:0},children:[e.jsx("strong",{children:"Luseniva:"})," ",e.jsx("span",{style:{fontWeight:"bold",color:p(t.avgAdultFemaleLice)},children:((a=t.avgAdultFemaleLice)==null?void 0:a.toFixed(3))||"Ikke rapportert"})]})}),e.jsx("p",{style:{fontSize:"11px",color:"#999",marginTop:"8px"},children:"Kilde: BarentsWatch"})]})})},`area-${t.localityNo}`)})]}),e.jsxs("div",{style:{position:"absolute",top:"10px",right:"10px",zIndex:1e3,display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("button",{onClick:()=&gt;g(!d),style:{padding:"10px 16px",backgroundColor:d?"#4CAF50":"#f44336",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",gap:"8px",fontSize:"13px"},children:d?"Skjul naboer":"Vis naboer"}),d&amp;&amp;e.jsxs("div",{style:{backgroundColor:"white",padding:"12px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)"},children:[e.jsxs("label",{style:{fontSize:"12px",fontWeight:"600",color:"#666"},children:["Radius: ",h," km"]}),e.jsx("input",{type:"range",min:"1",max:"30",value:h,onChange:t=&gt;b(parseInt(t.target.value)),style:{width:"100%",marginTop:"6px"}})]})]}),d&amp;&amp;r.length&gt;0&amp;&amp;e.jsx(P,{stats:s,loading:f}),e.jsx(V,{userCount:r.length,areaCount:n.length})]})},P=({stats:r,loading:o})=&gt;{const[n,i]=c.useState(!0);return e.jsxs("div",{style:{position:"absolute",top:"10px",left:"10px",zIndex:1e3,backgroundColor:"white",borderRadius:"10px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",overflow:"hidden",minWidth:"260px"},children:[e.jsxs("div",{onClick:()=&gt;i(!n),style:{padding:"14px 16px",background:"linear-gradient(135deg, #1976d2 0%, #1565c0 100%)",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold",fontSize:"15px",color:"white"},children:"Omrade"}),e.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.9)"},children:[r.total," anlegg i narheten"]})]}),e.jsx("div",{style:{fontSize:"18px",color:"white",transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.3s"},children:"‚ñº"})]}),n&amp;&amp;e.jsx("div",{style:{padding:"12px"},children:o?e.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666"},children:"Laster data..."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[e.jsx(w,{color:"#4CAF50",label:"OK",count:r.ok,threshold:"&lt; 0.08"}),e.jsx(w,{color:"#ff9800",label:"Advarsel",count:r.warning,threshold:"0.08-0.10"}),e.jsx(w,{color:"#f44336",label:"Fare",count:r.danger,threshold:"&gt;= 0.10"})]}),e.jsxs("div",{style:{marginTop:"12px",padding:"10px",backgroundColor:"#f5f5f5",borderRadius:"6px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"12px",color:"#666"},children:"Gjennomsnitt i omradet"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#1e3a5f"},children:r.average})]})]})})]})},w=({color:r,label:o,count:n,threshold:i})=&gt;e.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"10px 12px",borderRadius:"8px",backgroundColor:`${r}15`,border:`2px solid ${r}`},children:[e.jsx("div",{style:{width:"16px",height:"16px",backgroundColor:r,borderRadius:"50%",marginRight:"10px"}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"600",color:r,fontSize:"13px"},children:o}),e.jsx("div",{style:{fontSize:"11px",color:"#666"},children:i})]}),e.jsx("div",{style:{backgroundColor:r,color:"white",padding:"4px 12px",borderRadius:"12px",fontWeight:"bold",fontSize:"14px"},children:n})]}),V=({userCount:r,areaCount:o})=&gt;e.jsxs("div",{style:{position:"absolute",bottom:"20px",right:"20px",zIndex:1e3,backgroundColor:"white",padding:"12px 16px",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.15)",fontSize:"12px"},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:"8px",color:"#333"},children:"Tegnforklaring"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[e.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:"#4CAF50",border:"3px solid #1e3a5f",borderRadius:"50%"}}),e.jsxs("span",{children:["Dine anlegg (",r,")"]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[e.jsx("div",{style:{width:"14px",height:"14px",backgroundColor:"#4CAF50",border:"2px solid white",borderRadius:"50%",marginLeft:"3px",marginRight:"3px"}}),e.jsxs("span",{children:["Anlegg i omradet (",o,")"]})]})]}),q="http://localhost:3000";function G(){const{t:r}=L(),[o,n]=c.useState("map"),[i,d]=c.useState(null),[g,h]=c.useState([]),[b,f]=c.useState(!0);c.useEffect(()=&gt;{u()},[]);async function u(){f(!0);try{const s=localStorage.getItem("fjordvind_company_id");if(s){const v=await fetch(`${q}/api/user-localities?company_id=${s}`);if(v.ok){const y=await v.json();h(y.localities||[]),d({id:s})}}}catch(s){console.error("Error loading data:",s)}finally{f(!1)}}const l=s=&gt;{d(s),localStorage.setItem("fjordvind_company_id",s.id),n("add")},p=s=&gt;{h([...g,s]),g.length===0&amp;&amp;n("map")},j=[{id:"map",label:"Kart",icon:"üó∫Ô∏è"},{id:"add",label:"Legg til anlegg",icon:"‚ûï"},{id:"register",label:i?"Mitt selskap":"Registrer selskap",icon:"üè¢"}];return b?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Laster..."}):e.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"calc(100vh - 80px)",padding:"0 16px 16px 16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",padding:"12px 0",borderBottom:"1px solid var(--border)",marginBottom:"12px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"20px"},children:"Mine anlegg"}),e.jsx("div",{style:{display:"flex",gap:"8px"},children:j.map(s=&gt;e.jsxs("button",{onClick:()=&gt;n(s.id),style:{padding:"8px 16px",borderRadius:"8px",border:"none",backgroundColor:o===s.id?"#1976d2":"var(--bg, #f5f5f5)",color:o===s.id?"white":"var(--text, #333)",fontWeight:o===s.id?"600":"400",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.label})]},s.id))}),e.jsx("div",{style:{marginLeft:"auto",fontSize:"13px",color:"var(--muted)"},children:i?e.jsxs("span",{children:[g.length," anlegg registrert"]}):e.jsx("span",{style:{color:"#f59e0b"},children:"Ikke registrert"})})]}),e.jsxs("div",{style:{flex:1,minHeight:0,position:"relative"},children:[o==="map"&amp;&amp;e.jsx(e.Fragment,{children:g.length===0?e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",gap:"24px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"80px"},children:"ü§∑‚Äç‚ôÇÔ∏è"}),e.jsxs("div",{children:[e.jsx("h2",{style:{margin:"0 0 8px 0",color:"var(--text)"},children:"Ingen anlegg registrert"}),e.jsx("p",{style:{margin:0,color:"var(--muted)",maxWidth:"400px"},children:i?"Legg til dine anlegg for a se dem pa kartet sammen med naboer i omradet.":"Registrer ditt selskap for a komme i gang."})]}),e.jsx("button",{onClick:()=&gt;n(i?"add":"register"),style:{padding:"14px 28px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",fontSize:"14px",fontWeight:"600",cursor:"pointer"},children:i?"Legg til anlegg":"Registrer selskap"})]}):e.jsx(U,{userLocalities:g,companyId:i==null?void 0:i.id})}),o==="add"&amp;&amp;e.jsx("div",{style:{padding:"24px 0"},children:i?e.jsxs(e.Fragment,{children:[e.jsx(_,{onSelectLocality:p,companyId:i.id}),g.length&gt;0&amp;&amp;e.jsxs("div",{style:{marginTop:"32px",maxWidth:"600px",margin:"32px auto 0"},children:[e.jsx("h3",{style:{marginBottom:"16px"},children:"Dine registrerte anlegg"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:g.map(s=&gt;e.jsxs("div",{style:{padding:"12px 16px",backgroundColor:"var(--bg)",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:s.name}),e.jsxs("span",{style:{marginLeft:"8px",color:"var(--muted)",fontSize:"13px"},children:["#",s.locality_no]})]}),e.jsx("span",{style:{fontSize:"13px",color:"var(--muted)"},children:s.municipality})]},s.id))})]})]}):e.jsxs("div",{style:{textAlign:"center",padding:"40px",backgroundColor:"var(--bg)",borderRadius:"12px"},children:[e.jsx("h3",{style:{margin:"0 0 12px 0"},children:"Du ma registrere et selskap forst"}),e.jsx("button",{onClick:()=&gt;n("register"),style:{padding:"12px 24px",backgroundColor:"#1976d2",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:"600"},children:"Registrer selskap"})]})}),o==="register"&amp;&amp;e.jsx("div",{style:{padding:"24px 0"},children:e.jsx(T,{onSubmit:l,onCancel:i?()=&gt;n("map"):void 0})})]})]})}export{G as default};</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-11T16:07:30.331Z
            </div>
        <script src="../../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../../sorter.js"></script>
        <script src="../../../../../../../block-navigation.js"></script>
    </body>
</html>
    