
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for android/app/src/main/assets/public/assets/NyTellingPage-wQwAvi-f.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../../../index.html">All files</a> / <a href="index.html">android/app/src/main/assets/public/assets</a> NyTellingPage-wQwAvi-f.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >import{u as ye,d as fe,a as ve,b as be,r as o,j as e}from"./index-Cv4P48Md.js";import{r as je,f as Ce}from"./validation-BDChffl2.js";const S="http://localhost:3000";async function J(L,D=1200,n=.8){return new Promise(p=&gt;{const v=new FileReader;v.onload=I=&gt;{const b=new Image;b.onload=()=&gt;{const k=document.createElement("canvas");let C=b.width,g=b.height;C&gt;D&amp;&amp;(g=Math.round(g*D/C),C=D),k.width=C,k.height=g,k.getContext("2d").drawImage(b,0,0,C,g),k.toBlob(m=&gt;{const z=new File([m],L.name,{type:"image/jpeg",lastModified:Date.now()});p(z)},"image/jpeg",n)},b.src=I.target.result},v.readAsDataURL(L)})}function Ie(){const L=ye(),{user:D}=fe(),{t:n}=ve(),p=be(),v=o.useRef(null),[I,b]=o.useState(null),[k,C]=o.useState([]),[g,_]=o.useState([]),[m,z]=o.useState(""),[T,O]=o.useState(""),[P,X]=o.useState(new Date().toISOString().slice(0,10)),[U,K]=o.useState(new Date().toTimeString().slice(0,5)),[F,Q]=o.useState(""),[W,Y]=o.useState(""),[c,H]=o.useState("lice"),[w,V]=o.useState([]),Z=[{id:1,cause_name:"Naturlig dødelighet",category:"normal"},{id:2,cause_name:"Ukjent årsak",category:"normal"},{id:3,cause_name:"Avlusning - mekanisk",category:"behandling"},{id:4,cause_name:"Avlusning - termisk",category:"behandling"},{id:5,cause_name:"Avlusning - medisinsk",category:"behandling"},{id:6,cause_name:"Ferskvannsbehandling",category:"behandling"},{id:7,cause_name:"Vaksinering",category:"behandling"},{id:8,cause_name:"PD (Pancreas Disease)",category:"sykdom"},{id:9,cause_name:"ILA (Infeksiøs lakseanemi)",category:"sykdom"},{id:10,cause_name:"CMS (Hjertesprekk)",category:"sykdom"},{id:11,cause_name:"AGD (Amøbegjellesykdom)",category:"sykdom"},{id:12,cause_name:"Vintersår",category:"sykdom"},{id:13,cause_name:"Bakteriell infeksjon",category:"sykdom"},{id:14,cause_name:"Parasitter",category:"sykdom"},{id:15,cause_name:"Trenging",category:"håndtering"},{id:16,cause_name:"Sortering",category:"håndtering"},{id:17,cause_name:"Transport",category:"håndtering"},{id:18,cause_name:"Notskifte",category:"håndtering"},{id:19,cause_name:"Sel",category:"predator"},{id:20,cause_name:"Oter",category:"predator"},{id:21,cause_name:"Fugl",category:"predator"},{id:22,cause_name:"Algeoppblomstring",category:"miljø"},{id:23,cause_name:"Manet",category:"miljø"},{id:24,cause_name:"Oksygenmangel",category:"miljø"},{id:25,cause_name:"Temperaturstress",category:"miljø"},{id:26,cause_name:"Rømming (gjenfanget død)",category:"annet"},{id:27,cause_name:"Annet",category:"annet"}],[ee,te]=o.useState(Z);o.useEffect(()=&gt;{async function t(){try{const r=await fetch(`${S}/api/mortality/causes`);if(r.ok){const l=await r.json();l&amp;&amp;l.length&gt;0&amp;&amp;te(l)}}catch(r){console.error("Failed to load mortality causes, using defaults:",r)}}t()},[]),o.useEffect(()=&gt;{g.length&gt;0&amp;&amp;c==="mortality"&amp;&amp;V(g.map(t=&gt;({merdId:t.id,merdName:t.cage_name||t.name,salmonDead:"",salmonCause:"",salmonNotes:"",cleanerFishDead:"",cleanerFishType:"",cleanerFishCause:"",mortalityCategory:""})))},[g,c]);function R(t,r,l){V(a=&gt;a.map((s,i)=&gt;i===t?{...s,[r]:l}:s))}function $(){const t=w.reduce((l,a)=&gt;l+(parseInt(a.salmonDead)||0),0),r=w.reduce((l,a)=&gt;l+(parseInt(a.cleanerFishDead)||0),0);return{totalSalmon:t,totalCleanerFish:r,total:t+r}}const ne=ee.reduce((t,r)=&gt;(t[r.category]||(t[r.category]=[]),t[r.category].push(r),t),{}),ae=[{value:"normal",label:"Normal"},{value:"behandling",label:"Behandling"},{value:"sykdom",label:"Sykdom"},{value:"håndtering",label:"Håndtering"},{value:"predator",label:"Predator"},{value:"miljø",label:"Miljø"},{value:"annet",label:"Annet"}],[d,f]=o.useState([{id:1,voksneHunnlus:0,bevegeligeLus:0,fastsittendeLus:0,image:null,imagePreview:null}]),[we,ke]=o.useState(!1),[E,q]=o.useState(!1),[G,h]=o.useState(""),[re,se]=o.useState(!1),[M,N]=o.useState(!1);o.useEffect(()=&gt;{ie()},[]),o.useEffect(()=&gt;{m?le(m):(_([]),O(""))},[m]);async function ie(){try{const t=await fetch(`${S}/api/locations`);if(t.ok){const r=await t.json();C(r)}}catch(t){console.error("Failed to load locations:",t)}}async function le(t){try{const r=await fetch(`${S}/api/merds?locationId=${t}`);if(r.ok){const l=await r.json();_(l)}}catch(r){console.error("Failed to load merds:",r)}}function oe(){const t=Math.max(...d.map(r=&gt;r.id))+1;f([...d,{id:t,voksneHunnlus:0,bevegeligeLus:0,fastsittendeLus:0,image:null,imagePreview:null}])}async function de(t,r){var a;const l=(a=r.target.files)==null?void 0:a[0];if(l){N(!0);try{const s=await J(l),i=URL.createObjectURL(s);f(d.map(u=&gt;u.id===t?{...u,image:s,imagePreview:i}:u))}catch(s){console.error("Image compression failed:",s);const i=URL.createObjectURL(l);f(d.map(u=&gt;u.id===t?{...u,image:l,imagePreview:i}:u))}finally{N(!1)}}}function ce(t){b(t),v.current&amp;&amp;v.current.click()}async function ue(t){var l;const r=(l=t.target.files)==null?void 0:l[0];if(r&amp;&amp;I!==null){N(!0);try{const a=await J(r),s=URL.createObjectURL(a);f(d.map(i=&gt;i.id===I?{...i,image:a,imagePreview:s}:i))}catch(a){console.error("Camera image processing failed:",a);const s=URL.createObjectURL(r);f(d.map(i=&gt;i.id===I?{...i,image:r,imagePreview:s}:i))}finally{N(!1),b(null)}}v.current&amp;&amp;(v.current.value="")}function pe(t){f(d.map(r=&gt;(r.id===t&amp;&amp;r.imagePreview&amp;&amp;URL.revokeObjectURL(r.imagePreview),r.id===t?{...r,image:null,imagePreview:null}:r)))}function ge(t){d.length&gt;1&amp;&amp;f(d.filter(r=&gt;r.id!==t))}function B(t,r,l){f(d.map(a=&gt;a.id===t?{...a,[r]:Math.max(0,parseInt(l)||0)}:a))}function xe(){const t=d.length,r=d.reduce((u,j)=&gt;u+j.voksneHunnlus,0),l=d.reduce((u,j)=&gt;u+j.bevegeligeLus,0),a=d.reduce((u,j)=&gt;u+j.fastsittendeLus,0),s=t&gt;0?r/t:0,i=t&gt;0?(r+l+a)/t:0;return{totalFish:t,totalVoksneHunnlus:r,totalBevegeligeLus:l,totalFastsittendeLus:a,avgVoksneHunnlus:s,avgTotalLus:i,status:s&gt;=.5?n("newCount.danger"):s&gt;=.2?n("newCount.warning"):n("newCount.ok")}}async function me(t,r){const l=new FormData;l.append("image",t),l.append("observationId",r);try{const a=await fetch(`${S}/api/upload/fish-image`,{method:"POST",body:l});if(a.ok)return(await a.json()).image.url}catch(a){console.error("Image upload failed:",a)}return null}async function he(t){var r,l;if(t.preventDefault(),h(""),c==="lice"){if(!T){const a=n("newCount.selectCage");h(a),p.warning(a,{title:"Mangler merd"});return}if(d.length===0){const a=n("newCount.addObservation");h(a),p.warning(a);return}if(F){const a=je.temperature(F);if(a){h(a),p.warning(a,{title:"Ugyldig temperatur"});return}}}if(c==="mortality"){if(!m){const s=n("newCount.selectLocation")||"Velg en lokalitet";h(s),p.warning(s);return}if(g.length===0){const s=n("newCount.noMerdsFound")||"Ingen merder funnet for denne lokaliteten";h(s),p.warning(s);return}if(!w.some(s=&gt;parseInt(s.salmonDead)&gt;0||parseInt(s.cleanerFishDead)&gt;0)){const s=n("newCount.enterDeadFishCount")||"Oppgi antall døde fisk i minst én merd";h(s),p.warning(s);return}}q(!0);try{let a;if(c==="lice"){p.info("Lagrer telling...",{duration:2e3});const s=await Promise.all(d.map(async(i,u)=&gt;{let j=null;return i.image&amp;&amp;(j=await me(i.image,`fish-${u+1}`)),{fishId:String(u+1),voksneHunnlus:i.voksneHunnlus,bevegeligeLus:i.bevegeligeLus,fastsittendeLus:i.fastsittendeLus,imageUrl:j}}));a=await fetch(`${S}/api/samples`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({merdId:T,dato:P,tidspunkt:U,temperatur:F?parseFloat(F):null,notat:W,observations:s})})}else{p.info("Lagrer dødlighetsregistrering...",{duration:2e3});const s=w.filter(i=&gt;parseInt(i.salmonDead)&gt;0||parseInt(i.cleanerFishDead)&gt;0).map(i=&gt;({merdId:i.merdId,salmonDead:parseInt(i.salmonDead)||0,salmonCause:i.salmonCause||null,salmonNotes:i.salmonNotes||null,cleanerFishDead:parseInt(i.cleanerFishDead)||0,cleanerFishType:i.cleanerFishType||null,cleanerFishCause:i.cleanerFishCause||null,mortalityCategory:i.mortalityCategory||"normal"}));a=await fetch(`${S}/api/mortality/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({date:P,localityId:m,records:s})})}if(a.ok){const s=c==="lice"?`Lusetelling lagret - ${d.length} fisk registrert`:`Dødlighet registrert for ${w.filter(i=&gt;parseInt(i.salmonDead)&gt;0||parseInt(i.cleanerFishDead)&gt;0).length} merder`;p.success(s,{title:"Suksess"}),se(!0),setTimeout(()=&gt;{L("/history")},2e3)}else{const s=await a.json();if((r=s.error)!=null&amp;&amp;r.errors&amp;&amp;Array.isArray(s.error.errors)){const i=s.error.errors.join(". ");h(i),p.error(i,{title:"Valideringsfeil"})}else{const i=((l=s.error)==null?void 0:l.message)||s.error||n("newCount.couldNotSave");h(i),p.error(i)}}}catch(a){const s=Ce(a)||n("newCount.networkError");h(s),p.error(s,{title:"Nettverksfeil"})}finally{q(!1)}}const y=xe(),x={width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",fontSize:"14px",boxSizing:"border-box"},A={display:"block",marginBottom:"6px",fontWeight:"500",color:"var(--text-secondary)",fontSize:"14px"};return re?e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:e.jsxs("div",{className:"card",style:{padding:"40px",textAlign:"center",maxWidth:"400px"},children:[e.jsx("div",{style:{width:"60px",height:"60px",borderRadius:"50%",background:"rgba(34, 197, 94, 0.1)",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 20px",fontSize:"28px",color:"#22c55e"},children:"ok"}),e.jsx("h2",{style:{margin:"0 0 12px 0",color:"var(--text)"},children:n("newCount.countSaved")}),e.jsx("p",{style:{color:"var(--text-secondary)",margin:0},children:n("newCount.redirecting")})]})}):e.jsxs("div",{style:{padding:"0 16px 16px 16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px",padding:"12px 0",borderBottom:"1px solid var(--border)",marginBottom:"20px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"20px"},children:n("newCount.title")}),e.jsx("span",{style:{fontSize:"13px",color:"var(--muted)"},children:n("newCount.subtitle")})]}),e.jsx("input",{type:"file",ref:v,accept:"image/*",capture:"environment",onChange:ue,style:{display:"none"}}),e.jsxs("form",{onSubmit:he,children:[G&amp;&amp;e.jsx("div",{style:{padding:"12px 16px",borderRadius:"8px",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",color:"#ef4444",marginBottom:"20px"},children:G}),e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{className:"card-title",children:n("newCount.selectCountType")||"Velg type telling"}),e.jsxs("div",{style:{display:"flex",gap:"12px"},children:[e.jsx("button",{type:"button",onClick:()=&gt;H("lice"),style:{flex:1,padding:"12px 20px",borderRadius:"8px",border:c==="lice"?"2px solid #1976d2":"1px solid var(--border)",backgroundColor:c==="lice"?"rgba(25, 118, 210, 0.15)":"var(--bg)",color:c==="lice"?"#1976d2":"var(--text)",fontWeight:c==="lice"?"600":"400",cursor:"pointer",fontSize:"14px"},children:n("newCount.liceCount")}),e.jsx("button",{type:"button",onClick:()=&gt;H("mortality"),style:{flex:1,padding:"12px 20px",borderRadius:"8px",border:c==="mortality"?"2px solid #ef4444":"1px solid var(--border)",backgroundColor:c==="mortality"?"rgba(239, 68, 68, 0.15)":"var(--bg)",color:c==="mortality"?"#ef4444":"var(--text)",fontWeight:c==="mortality"?"600":"400",cursor:"pointer",fontSize:"14px"},children:n("newCount.mortalityCount")})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{className:"card-title",children:n("newCount.selectLocation")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:c==="mortality"?"1fr":"1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:A,children:n("newCount.location")}),e.jsxs("select",{value:m,onChange:t=&gt;z(t.target.value),style:x,required:!0,children:[e.jsx("option",{value:"",children:n("newCount.selectLocationPlaceholder")}),k.map(t=&gt;e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),c==="lice"&amp;&amp;e.jsxs("div",{children:[e.jsx("label",{style:A,children:n("newCount.cage")}),e.jsxs("select",{value:T,onChange:t=&gt;O(t.target.value),style:x,disabled:!m,required:!0,children:[e.jsx("option",{value:"",children:n("newCount.selectCagePlaceholder")}),g.map(t=&gt;e.jsx("option",{value:t.id,children:t.cage_name||t.name},t.id))]})]})]}),c==="mortality"&amp;&amp;m&amp;&amp;g.length&gt;0&amp;&amp;e.jsxs("div",{style:{marginTop:"12px",color:"var(--text-secondary)",fontSize:"13px"},children:[g.length," ",n("newCount.merdsFound")||"merder funnet"," - ",n("newCount.enterMortalityBelow")||"registrer dødlighet for hver merd nedenfor"]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{className:"card-title",children:n("newCount.timing")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:A,children:n("newCount.date")}),e.jsx("input",{type:"date",value:P,onChange:t=&gt;X(t.target.value),style:x,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:A,children:n("newCount.time")}),e.jsx("input",{type:"time",value:U,onChange:t=&gt;K(t.target.value),style:x})]}),e.jsxs("div",{children:[e.jsx("label",{style:A,children:n("newCount.temperature")}),e.jsx("input",{type:"number",step:"0.1",value:F,onChange:t=&gt;Q(t.target.value),style:x,placeholder:n("newCount.tempPlaceholder")})]})]})]}),c==="mortality"&amp;&amp;e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsx("h3",{className:"card-title",style:{margin:0},children:n("newCount.mortalityRegistration")}),w.length&gt;0&amp;&amp;e.jsxs("div",{style:{display:"flex",gap:"16px",fontSize:"13px"},children:[e.jsxs("span",{children:["Laks: ",e.jsx("strong",{style:{color:"#ef4444"},children:$().totalSalmon})]}),e.jsxs("span",{children:["Leppefisk: ",e.jsx("strong",{style:{color:"#f59e0b"},children:$().totalCleanerFish})]})]})]}),g.length===0?e.jsx("div",{style:{padding:"24px",textAlign:"center",color:"var(--text-secondary)"},children:n("newCount.selectLocationFirst")}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60px 100px 100px 1fr 1fr",gap:"12px",padding:"10px 12px",backgroundColor:"var(--bg-secondary, #f1f5f9)",borderBottom:"1px solid var(--border)",fontWeight:"600",fontSize:"12px",color:"var(--text-secondary)"},children:[e.jsx("div",{children:"Merd"}),e.jsx("div",{children:"Laks"}),e.jsx("div",{children:"Leppefisk"}),e.jsx("div",{children:"Årsak"}),e.jsx("div",{children:"Grunnlag"}),e.jsx("div",{})]}),w.map((t,r)=&gt;{const l=parseInt(t.salmonDead)&gt;0||parseInt(t.cleanerFishDead)&gt;0;return e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"60px 100px 100px 1fr 1fr",gap:"12px",padding:"8px 12px",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px",color:l?"#ef4444":"var(--text-secondary)"},children:t.merdName||`M${r+1}`}),e.jsx("input",{type:"number",min:"0",value:t.salmonDead,onChange:a=&gt;R(r,"salmonDead",a.target.value),style:{...x,textAlign:"center",padding:"8px"},placeholder:"0"}),e.jsx("input",{type:"number",min:"0",value:t.cleanerFishDead,onChange:a=&gt;R(r,"cleanerFishDead",a.target.value),style:{...x,textAlign:"center",padding:"8px"},placeholder:"0"}),e.jsxs("select",{value:t.salmonCause,onChange:a=&gt;R(r,"salmonCause",a.target.value),style:{...x,fontSize:"13px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Velg årsak..."}),Object.entries(ne).map(([a,s])=&gt;e.jsx("optgroup",{label:a.charAt(0).toUpperCase()+a.slice(1),children:s.map(i=&gt;e.jsx("option",{value:i.cause_name,children:i.cause_name},i.id))},a))]}),e.jsxs("select",{value:t.mortalityCategory,onChange:a=&gt;R(r,"mortalityCategory",a.target.value),style:{...x,fontSize:"13px",padding:"8px"},children:[e.jsx("option",{value:"",children:"Velg..."}),ae.map(a=&gt;e.jsx("option",{value:a.value,children:a.label},a.value))]})]},t.merdId)})]})]}),c==="lice"&amp;&amp;e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[e.jsxs("h3",{className:"card-title",style:{margin:0},children:[n("newCount.fishObservations")," (",d.length," ",n("newCount.fish"),")"]}),e.jsx("button",{type:"button",onClick:oe,className:"btn btn-primary",style:{padding:"8px 16px",fontSize:"14px"},children:n("newCount.addFish")})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsx("th",{style:{padding:"10px",textAlign:"left",color:"var(--text-secondary)",fontWeight:"500"},children:n("newCount.fishNumber")}),e.jsx("th",{style:{padding:"10px",textAlign:"center",color:"var(--text-secondary)",fontWeight:"500"},children:n("newCount.adultFemaleLice")}),e.jsx("th",{style:{padding:"10px",textAlign:"center",color:"var(--text-secondary)",fontWeight:"500"},children:n("newCount.mobileLice")}),e.jsx("th",{style:{padding:"10px",textAlign:"center",color:"var(--text-secondary)",fontWeight:"500"},children:n("newCount.attachedLice")}),e.jsx("th",{style:{padding:"10px",textAlign:"center",color:"var(--text-secondary)",fontWeight:"500"},children:n("newCount.image")}),e.jsx("th",{style:{padding:"10px",textAlign:"center",width:"60px"}})]})}),e.jsx("tbody",{children:d.map((t,r)=&gt;e.jsxs("tr",{style:{borderBottom:"1px solid var(--border)"},children:[e.jsxs("td",{style:{padding:"10px",fontWeight:"500"},children:["#",r+1]}),e.jsx("td",{style:{padding:"10px"},children:e.jsx("input",{type:"number",min:"0",value:t.voksneHunnlus,onChange:l=&gt;B(t.id,"voksneHunnlus",l.target.value),style:{...x,textAlign:"center",width:"80px",margin:"0 auto",display:"block"}})}),e.jsx("td",{style:{padding:"10px"},children:e.jsx("input",{type:"number",min:"0",value:t.bevegeligeLus,onChange:l=&gt;B(t.id,"bevegeligeLus",l.target.value),style:{...x,textAlign:"center",width:"80px",margin:"0 auto",display:"block"}})}),e.jsx("td",{style:{padding:"10px"},children:e.jsx("input",{type:"number",min:"0",value:t.fastsittendeLus,onChange:l=&gt;B(t.id,"fastsittendeLus",l.target.value),style:{...x,textAlign:"center",width:"80px",margin:"0 auto",display:"block"}})}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:t.imagePreview?e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",justifyContent:"center"},children:[e.jsx("img",{src:t.imagePreview,alt:`Fisk ${r+1}`,style:{width:"40px",height:"40px",objectFit:"cover",borderRadius:"4px",border:"1px solid var(--border)"}}),e.jsx("button",{type:"button",onClick:()=&gt;pe(t.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"4px",color:"#ef4444",padding:"4px 8px",cursor:"pointer",fontSize:"11px"},children:"X"})]}):e.jsxs("div",{style:{display:"flex",gap:"6px",justifyContent:"center"},children:[e.jsx("button",{type:"button",onClick:()=&gt;ce(t.id),disabled:M,style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"6px 10px",borderRadius:"4px",border:"1px solid var(--primary)",background:"rgba(59, 130, 246, 0.1)",cursor:"pointer",fontSize:"12px",color:"var(--primary)"},title:n("newCount.takePhoto"),children:e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("path",{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}),e.jsx("circle",{cx:"12",cy:"13",r:"4"})]})}),e.jsxs("label",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"6px 10px",borderRadius:"4px",border:"1px dashed var(--border)",background:"var(--bg)",cursor:M?"wait":"pointer",fontSize:"12px",color:"var(--text-secondary)",opacity:M?.6:1},title:n("newCount.selectFromGallery"),children:[e.jsx("input",{type:"file",accept:"image/*",onChange:l=&gt;de(t.id,l),disabled:M,style:{display:"none"}}),e.jsxs("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),e.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e.jsx("polyline",{points:"21,15 16,10 5,21"})]})]})]})}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:d.length&gt;1&amp;&amp;e.jsx("button",{type:"button",onClick:()=&gt;ge(t.id),style:{background:"rgba(239, 68, 68, 0.1)",border:"none",borderRadius:"4px",color:"#ef4444",padding:"6px 10px",cursor:"pointer",fontSize:"12px"},children:n("newCount.remove")})})]},t.id))})]})}),e.jsxs("div",{style:{marginTop:"16px",display:"flex",gap:"8px",flexWrap:"wrap"},children:[e.jsx</span></span>("span",{style:{color:"var(--text-secondary)",fontSize:"14px",marginRight:"8px"},children:n("newCount.quickAdd")}),[5,10,15,20].map(t=&gt;e.jsxs("button",{type:"button",onClick:()=&gt;{const r=Math.max(...d.map(a=&gt;a.id),0),l=Array.from({length:t},(a,s)=&gt;({id:r+s+1,voksneHunnlus:0,bevegeligeLus:0,fastsittendeLus:0,image:null,imagePreview:null}));f([...d,...l])},style:{padding:"6px 12px",borderRadius:"4px",border:"1px solid var(--border)",background:"var(--bg)",color:"var(--text)",cursor:"pointer",fontSize:"13px"},children:["+",t," ",n("newCount.fish")]},t))]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{className:"card-title",children:n("newCount.summary")}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"16px"},children:[e.jsxs("div",{style:{textAlign:"center",padding:"16px",background:"var(--bg)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)"},children:y.totalFish}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:n("newCount.fishCounted")})]}),e.jsxs("div",{style:{textAlign:"center",padding:"16px",background:"var(--bg)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:"var(--text)"},children:y.totalVoksneHunnlus}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:n("newCount.adultFemaleLice")})]}),e.jsxs("div",{style:{textAlign:"center",padding:"16px",background:"var(--bg)",borderRadius:"8px"},children:[e.jsx("div",{style:{fontSize:"24px",fontWeight:"700",color:y.status===n("newCount.danger")?"#ef4444":y.status===n("newCount.warning")?"#eab308":"#22c55e"},children:y.avgVoksneHunnlus.toFixed(2)}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:n("newCount.avgPerFish")})]}),e.jsxs("div",{style:{textAlign:"center",padding:"16px",background:"var(--bg)",borderRadius:"8px"},children:[e.jsx("div",{style:{display:"inline-block",padding:"8px 16px",borderRadius:"20px",fontSize:"14px",fontWeight:"600",background:y.status===n("newCount.danger")?"rgba(239, 68, 68, 0.2)":y.status===n("newCount.warning")?"rgba(234, 179, 8, 0.2)":"rgba(34, 197, 94, 0.2)",color:y.status===n("newCount.danger")?"#ef4444":y.status===n("newCount.warning")?"#eab308":"#22c55e"},children:y.status}),e.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:n("newCount.status")})]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:"20px"},children:[e.jsx("h3",{className:"card-title",children:n("newCount.notesOptional")}),e.jsx("textarea",{value:W,onChange:t=&gt;Y(t.target.value),style:{...x,minHeight:"100px",resize:"vertical"},placeholder:n("newCount.notesPlaceholder")})]}),e.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[e.jsx("button",{type:"button",onClick:()=&gt;L(-1),style:{padding:"12px 24px",borderRadius:"8px",border:"1px solid var(--border)",background:"transparent",color:"var(--text)",cursor:"pointer",fontSize:"14px"},children:n("newCount.cancel")}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,style:{padding:"12px 32px"},children:n(E?"newCount.saving":"newCount.saveCount")})]})]})]})}export{Ie as default};</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-11T16:07:30.331Z
            </div>
        <script src="../../../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../../../sorter.js"></script>
        <script src="../../../../../../../block-navigation.js"></script>
    </body>
</html>
    