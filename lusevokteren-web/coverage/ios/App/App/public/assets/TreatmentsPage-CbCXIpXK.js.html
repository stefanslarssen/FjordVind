
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for ios/App/App/public/assets/TreatmentsPage-CbCXIpXK.js</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../../../prettify.css" />
    <link rel="stylesheet" href="../../../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../../../index.html">All files</a> / <a href="index.html">ios/App/App/public/assets</a> TreatmentsPage-CbCXIpXK.js</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">0% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>0/1</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line low'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a></td><td class="line-coverage quiet"><span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js"><span class="cstat-no" title="statement not covered" ><span class="fstat-no" title="function not covered" ><span class="branch-0 cbranch-no" title="branch not covered" >import{b as le,r as d,j as e}from"./index-Cv4P48Md.js";import{v as ie,f as V,r as L}from"./validation-BDChffl2.js";const N="http://localhost:3000";function oe(){const h=le(),[g,U]=d.useState([]),[F,q]=d.useState([]),[J,Y]=d.useState([]),[_,P]=d.useState(!0),[j,G]=d.useState("upcoming"),[Q,R]=d.useState(!1),[X,I]=d.useState(!1),[Z,D]=d.useState(!1),[b,B]=d.useState(null),[o,O]=d.useState(null),[f,A]=d.useState(!1),[T,m]=d.useState(""),[y,v]=d.useState({}),[c,E]=d.useState({treatmentType:"THERMOLICER",scheduledDate:"",scheduledTime:"",notes:""}),[n,S]=d.useState({liceAfter:"",mortalityPercent:"",costNok:"",notes:""}),[r,k]=d.useState({merdId:"",treatmentType:"THERMOLICER",scheduledDate:"",scheduledTime:"",liceBefore:"",notes:""});d.useEffect(()=&gt;{w()},[]);async function w(){try{P(!0);const[t,i,s]=await Promise.all([fetch(`${N}/api/treatments`),fetch(`${N}/api/treatments/recommendations`),fetch(`${N}/api/merds`)]);if(t.ok){const l=await t.json();U(l.treatments||[])}if(i.ok){const l=await i.json();q(l.recommendations||[])}if(s.ok){const l=await s.json();Y(l||[])}}catch(t){console.error("Failed to load treatments:",t)}finally{P(!1)}}async function z(t){var i,s;A(!0),m(""),v({});try{const l=await fetch(`${N}/api/treatments`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await l.json();if(!l.ok){if((i=a.error)!=null&amp;&amp;i.errors&amp;&amp;Array.isArray(a.error.errors)){const u=a.error.errors.join(". ");m(u),h.error(u,{title:"Valideringsfeil"})}else{const u=((s=a.error)==null?void 0:s.message)||"Kunne ikke opprette behandling";m(u),h.error(u)}return!1}return h.success("Behandling opprettet",{title:"Suksess"}),await w(),!0}catch(l){const a=V(l);return m(a),h.error(a),!1}finally{A(!1)}}async function W(t,i){var s,l;A(!0),m(""),v({});try{const a=await fetch(`${N}/api/treatments/${t}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),u=await a.json();if(!a.ok){if((s=u.error)!=null&amp;&amp;s.errors&amp;&amp;Array.isArray(u.error.errors)){const C=u.error.errors.join(". ");m(C),h.error(C,{title:"Valideringsfeil"})}else{const C=((l=u.error)==null?void 0:l.message)||"Kunne ikke oppdatere behandling";m(C),h.error(C)}return!1}return h.success("Behandling oppdatert",{title:"Suksess"}),await w(),!0}catch(a){const u=V(a);return m(u),h.error(u),!1}finally{A(!1)}}async function ee(){if(!b)return;if(!c.scheduledDate){h.warning("Velg en dato for behandlingen",{title:"Mangler dato"}),v({scheduledDate:"Dato er påkrevd"});return}v({}),await z({merdId:b.merdId,treatmentType:c.treatmentType||b.recommendedTreatment,scheduledDate:c.scheduledDate,scheduledTime:c.scheduledTime||null,liceBefore:b.currentLice,notes:c.notes,recommendationSource:"AI",urgency:b.urgency})&amp;&amp;(R(!1),B(null),E({treatmentType:"THERMOLICER",scheduledDate:"",scheduledTime:"",notes:""}))}async function te(){if(!o)return;const t=o.liceBefore&amp;&amp;n.liceAfter?(o.liceBefore-parseFloat(n.liceAfter))/o.liceBefore*100:null;await W(o.id,{status:"COMPLETED",completedDate:new Date().toISOString().split("T")[0],liceAfter:n.liceAfter?parseFloat(n.liceAfter):null,effectivenessPercent:t,mortalityPercent:n.mortalityPercent?parseFloat(n.mortalityPercent):null,costNok:n.costNok?parseFloat(n.costNok):null,notes:n.notes||o.notes})&amp;&amp;(I(!1),O(null),S({liceAfter:"",mortalityPercent:"",costNok:"",notes:""}))}async function re(){const t={merdId:[L.required],treatmentType:[L.required],scheduledDate:[L.required,L.date]},{valid:i,errors:s}=ie({merdId:r.merdId,treatmentType:r.treatmentType,scheduledDate:r.scheduledDate},t);if(!i){v(s);const a=Object.values(s).filter(Boolean);h.warning(a.join(". "),{title:"Fyll ut påkrevde felt"});return}v({}),await z({merdId:r.merdId,treatmentType:r.treatmentType,scheduledDate:r.scheduledDate,scheduledTime:r.scheduledTime||null,liceBefore:r.liceBefore?parseFloat(r.liceBefore):null,notes:r.notes,recommendationSource:"MANUAL",urgency:"MEDIUM"})&amp;&amp;(D(!1),k({merdId:"",treatmentType:"THERMOLICER",scheduledDate:"",scheduledTime:"",liceBefore:"",notes:""}))}async function se(t){if(!confirm(`Er du sikker på at du vil avlyse behandlingen for ${t.merdName}?`))return;await W(t.id,{status:"CANCELLED"})&amp;&amp;h.info(`Behandling for ${t.merdName} ble avlyst`)}const H=j==="upcoming"?g.filter(t=&gt;["PLANNED","CONFIRMED"].includes(t.status)):j==="completed"?g.filter(t=&gt;t.status==="COMPLETED"):g,ne=t=&gt;{switch(t){case"PLANNED":return"Planlagt";case"CONFIRMED":return"Bekreftet";case"IN_PROGRESS":return"Pågår";case"COMPLETED":return"Fullført";case"CANCELLED":return"Kansellert";default:return t}},M=t=&gt;{switch(t){case"THERMOLICER":return"Thermolicer";case"HYDROLICER":return"Hydrolicer";case"OPTILICER":return"Optilicer";case"LUSESKJORT":return"Luseskjørt";case"RENSEFISK":return"Rensefisk";case"MEDIKAMENTELL":return"Medikamentell";case"FERSKVANN":return"Ferskvann";case"LASER":return"Laser";case"ANNET":return"Annet";default:return t}},K=t=&gt;{switch(t){case"IMMEDIATE":return"#dc2626";case"HIGH":return"#f59e0b";case"MEDIUM":return"#eab308";case"LOW":return"#22c55e";default:return"#6b7280"}},$=t=&gt;t?new Date(t).toLocaleDateString("nb-NO",{day:"numeric",month:"short",year:"numeric"}):"-",p={width:"100%",padding:"10px 12px",borderRadius:"6px",border:"1px solid var(--border, #ddd)",background:"var(--bg, white)",color:"var(--text, #333)",fontSize:"14px",boxSizing:"border-box"},x={display:"block",marginBottom:"6px",fontWeight:"500",fontSize:"14px",color:"var(--text, #333)"};return _?e.jsx("div",{style:{padding:"40px",textAlign:"center"},children:"Laster behandlinger..."}):e.jsxs("div",{style:{padding:"0 16px 16px 16px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"24px",padding:"12px 0",borderBottom:"1px solid var(--border)",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"24px"},children:[e.jsx("h1",{style:{margin:0,fontSize:"20px"},children:"Behandlingsplanlegging"}),e.jsx("span",{style:{fontSize:"13px",color:"var(--muted)"},children:"Planlegg og spor behandlinger basert på AI-anbefalinger"})]}),e.jsx("button",{onClick:()=&gt;D(!0),className:"btn btn-primary",style:{display:"flex",alignItems:"center",gap:"8px"},children:"+ Ny behandling"})]}),F.length&gt;0&amp;&amp;e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e3a5f 0%, #1a2d45 100%)",borderRadius:"12px",padding:"20px",marginBottom:"25px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:e.jsxs("h2",{style:{fontSize:"16px",color:"#5fa9bd",display:"flex",alignItems:"center",gap:"10px",margin:0},children:["AI Behandlingsanbefalinger",e.jsx("span",{style:{background:"linear-gradient(135deg, #8b5cf6, #6366f1)",padding:"3px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"700",color:"white"},children:"AI-DREVET"})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:F.map((t,i)=&gt;{var s,l;return e.jsxs("div",{style:{background:"rgba(255,255,255,0.05)",borderRadius:"10px",padding:"15px",display:"grid",gridTemplateColumns:"100px 1fr 150px 100px 130px",alignItems:"center",gap:"15px"},children:[e.jsx("div",{style:{fontWeight:"600",color:"#5fa9bd"},children:t.merdName}),e.jsxs("div",{style:{color:"#ccc",fontSize:"13px"},children:["Lusenivå ",(s=t.currentLice)==null?void 0:s.toFixed(2)," → ",e.jsx("strong",{style:{color:t.predictedLice&gt;=.5?"#ef4444":"#fff"},children:(l=t.predictedLice)==null?void 0:l.toFixed(2)})," om 7 dager"]}),e.jsxs("div",{style:{color:"#8ba3b5",fontSize:"12px"},children:["Anbefalt:",e.jsx("div",{style:{color:"#fff",fontWeight:"500"},children:M(t.recommendedTreatment)})]}),e.jsx("div",{style:{padding:"4px 10px",borderRadius:"4px",background:`${K(t.urgency)}20`,color:K(t.urgency),fontSize:"11px",fontWeight:"600",textAlign:"center"},children:t.urgencyText}),e.jsx("button",{onClick:()=&gt;{var a;B(t),E({treatmentType:t.recommendedTreatment,scheduledDate:new Date(Date.now()+5*24*60*60*1e3).toISOString().split("T")[0],scheduledTime:"08:00",notes:`AI-anbefalt behandling. Forventet lusenivå: ${(a=t.predictedLice)==null?void 0:a.toFixed(2)}`}),R(!0)},style:{padding:"8px 16px",borderRadius:"6px",border:"none",background:"#2d9bc4",color:"white",cursor:"pointer",fontSize:"12px",fontWeight:"500"},children:"Planlegg"})]},i)})})]}),e.jsx("div",{style:{marginBottom:"20px",display:"flex",gap:"10px"},children:[{key:"upcoming",label:"Kommende",count:g.filter(t=&gt;["PLANNED","CONFIRMED"].includes(t.status)).length},{key:"all",label:"Alle",count:g.length},{key:"completed",label:"Fullførte",count:g.filter(t=&gt;t.status==="COMPLETED").length}].map(t=&gt;e.jsxs("button",{onClick:()=&gt;G(t.key),style:{padding:"8px 16px",borderRadius:"6px",border:j===t.key?"none":"1px solid var(--border, #ddd)",background:j===t.key?"#2d9bc4":"var(--panel, white)",color:j===t.key?"white":"var(--text, #333)",cursor:"pointer",fontWeight:j===t.key?"600":"400",display:"flex",alignItems:"center",gap:"6px"},children:[t.label,e.jsx("span",{style:{background:j===t.key?"rgba(255,255,255,0.2)":"var(--bg, #e5e7eb)",padding:"2px 8px",borderRadius:"10px",fontSize:"12px"},children:t.count})]},t.key))}),e.jsxs("div",{className:"card",style:{padding:0,overflow:"hidden"},children:[e.jsxs("table",{className:"table",style:{margin:0},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Merd"}),e.jsx("th",{children:"Type"}),e.jsx("th",{style:{textAlign:"center"},children:"Dato"}),e.jsx("th",{style:{textAlign:"center"},children:"Status"}),e.jsx("th",{style:{textAlign:"center"},children:"Lus før"}),e.jsx("th",{style:{textAlign:"center"},children:"Lus etter"}),e.jsx("th",{style:{textAlign:"center"},children:"Effektivitet"}),e.jsx("th",{style:{textAlign:"center"},children:"Handlinger"})]})}),e.jsx("tbody",{children:H.map(t=&gt;{var i,s;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{style:{fontWeight:"500"},children:t.merdName}),e.jsx("div",{style:{fontSize:"12px",color:"var(--muted, #666)"},children:t.locality})]}),e.jsxs("td",{children:[M(t.treatmentType),t.recommendationSource==="AI"&amp;&amp;e.jsx("span",{style:{marginLeft:"8px",background:"linear-gradient(135deg, #8b5cf6, #6366f1)",padding:"2px 6px",borderRadius:"4px",fontSize:"9px",fontWeight:"600",color:"white"},children:"AI"})]}),e.jsx("td",{style:{textAlign:"center"},children:$(t.scheduledDate)}),e.jsx("td",{style:{textAlign:"center"},children:e.jsx("span",{className:`badge ${t.status==="COMPLETED"?"ok":t.status==="CANCELLED"?"":"warn"}`,children:ne(t.status)})}),e.jsx("td",{style:{textAlign:"center"},children:((i=t.liceBefore)==null?void 0:i.toFixed(2))||"-"}),e.jsx("td",{style:{textAlign:"center",color:t.liceAfter&lt;t.liceBefore?"#22c55e":"inherit"},children:((s=t.liceAfter)==null?void 0:s.toFixed(2))||"-"}),e.jsx("td",{style:{textAlign:"center"},children:t.effectivenessPercent?e.jsxs("span",{style:{color:t.effectivenessPercent&gt;=80?"#22c55e":"#f59e0b",fontWeight:"600"},children:[t.effectivenessPercent.toFixed(0),"%"]}):"-"}),e.jsx("td",{style:{textAlign:"center"},children:["PLANNED","CONFIRMED"].includes(t.status)&amp;&amp;e.jsxs("div",{style:{display:"flex",gap:"6px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=&gt;{O(t),S({liceAfter:"",mortalityPercent:"",costNok:"",notes:t.notes||""}),I(!0)},style:{padding:"4px 10px",borderRadius:"4px",border:"none",background:"#22c55e",color:"white",cursor:"pointer",fontSize:"11px",fontWeight:"500"},children:"Fullfør"}),e.jsx("button",{onClick:()=&gt;se(t),style:{padding:"4px 10px",borderRadius:"4px",border:"1px solid var(--border, #ddd)",background:"transparent",color:"var(--muted, #666)",cursor:"pointer",fontSize:"11px"},children:"Avlys"})]})})]},t.id)})})]}),H.length===0&amp;&amp;e.jsx("div",{style:{padding:"40px",textAlign:"center",color:"var(--muted, #666)"},children:"Ingen behandlinger funnet"})]}),g.length&gt;0&amp;&amp;e.jsxs("div",{style:{marginTop:"30px"},children:[e.jsx("h2",{style:{fontSize:"18px",fontWeight:"600",marginBottom:"15px"},children:"Behandlingsstatistikk"}),e.jsxs("div",{className:"stat-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-label",children:"Totalt behandlinger"}),e.jsx("div",{className:"stat-value",children:g.length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-label",children:"Fullført"}),e.jsx("div",{className:"stat-value ok",children:g.filter(t=&gt;t.status==="COMPLETED").length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-label",children:"Planlagt"}),e.jsx("div",{className:"stat-value warn",children:g.filter(t=&gt;["PLANNED","CONFIRMED"].includes(t.status)).length})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-label",children:"Snitt effektivitet"}),e.jsx("div",{className:"stat-value ok",children:(()=&gt;{const t=g.filter(s=&gt;s.effectivenessPercent);return t.length===0?"-":`${(t.reduce((s,l)=&gt;s+l.effectivenessPercent,0)/t.length).toFixed(0)}%`})()})]})]})]}),Q&amp;&amp;b&amp;&amp;e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=&gt;R(!1),children:e.jsxs("div",{style:{background:"var(--panel, white)",borderRadius:"12px",padding:"30px",width:"500px",maxWidth:"90%"},onClick:t=&gt;t.stopPropagation(),children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"var(--text, #333)"},children:["Planlegg behandling for ",b.merdName]}),T&amp;&amp;e.jsx("div",{style:{padding:"10px",background:"#fef2f2",color:"#dc2626",borderRadius:"6px",marginBottom:"16px",fontSize:"14px"},children:T}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Behandlingstype"}),e.jsxs("select",{value:c.treatmentType,onChange:t=&gt;E({...c,treatmentType:t.target.value}),style:p,children:[e.jsx("option",{value:"THERMOLICER",children:"Thermolicer"}),e.jsx("option",{value:"HYDROLICER",children:"Hydrolicer"}),e.jsx("option",{value:"OPTILICER",children:"Optilicer"}),e.jsx("option",{value:"LUSESKJORT",children:"Luseskjørt"}),e.jsx("option",{value:"RENSEFISK",children:"Rensefisk"}),e.jsx("option",{value:"MEDIKAMENTELL",children:"Medikamentell"}),e.jsx("option",{value:"FERSKVANN",children:"Ferskvann"}),e.jsx("option",{value:"LASER",children:"Laser"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Dato"}),e.jsx("input",{type:"date",value:c.scheduledDate,onChange:t=&gt;E({...c,scheduledDate:t.target.value}),style:p,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Tidspunkt"}),e.jsx("input",{type:"time",value:c.scheduledTime,onChange:t=&gt;E({...c,scheduledTime:t.target.value}),style:p})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Notater"}),e.jsx("textarea",{value:c.notes,onChange:t=&gt;E({...c,notes:t.target.value}),style:{...p,minHeight:"80px",resize:"vertical"},placeholder:"Valgfrie notater..."})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"24px"},children:[e.jsx("button",{onClick:()=&gt;R(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid var(--border, #ddd)",background:"transparent",color:"var(--text, #333)",cursor:"pointer"},children:"Avbryt"}),e.jsx("button",{onClick:ee,disabled:f||!c.scheduledDate,className:"btn btn-primary",style:{opacity:f||!c.scheduledDate?.7:1},children:f?"Lagrer...":"Bekreft planlegging"})]})]})}),X&amp;&amp;o&amp;&amp;e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=&gt;I(!1),children:e.jsxs("div",{style:{background:"var(--panel, white)",borderRadius:"12px",padding:"30px",width:"500px",maxWidth:"90%"},onClick:t=&gt;t.stopPropagation(),children:[e.jsxs("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"var(--text, #333)"},children:["Fullfør behandling - ",o.merdName]}),e.jsxs("div",{style:{background:"var(--bg, #f8fafc)",padding:"12px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsxs("div",{style:{fontSize:"13px",color:"var(--muted, #666)"},children:[M(o.treatmentType)," - ",$(o.scheduledDate)]}),o.liceBefore&amp;&amp;e.jsxs("div",{style:{fontSize:"14px",marginTop:"4px"},children:["Lusenivå før: ",e.jsx("strong",{children:o.liceBefore.toFixed(2)})]})]}),T&amp;&amp;e.jsx("div",{style:{padding:"10px",background:"#fef2f2",color:"#dc2626",borderRadius:"6px",marginBottom:"16px",fontSize:"14px"},children:T}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Lusenivå etter"}),e.jsx("input",{type:"number",step:"0.01",value:n.liceAfter,onChange:t=&gt;S({...n,liceAfter:t.target.value}),style:p,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Dødelighet (%)"}),e.jsx("input",{type:"number",step:"0.1",value:n.mortalityPercent,onChange:t=&gt;S({...n,mortalityPercent:t.target.value}),style:p,placeholder:"0.0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Kostnad (NOK)"}),e.jsx("input",{type:"number",value:n.costNok,onChange:t=&gt;S({...n,costNok:t.target.value}),style:p,placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Notater"}),e.jsx("textarea",{value:n.notes,onChange:t=&gt;S({...n,notes:t.target.value}),style:{...p,minHeight:"80px",resize:"vertical"},placeholder:"Observasjoner, avvik, etc..."})]}),o.liceBefore&amp;&amp;n.liceAfter&amp;&amp;e.jsxs("div",{style:{background:"#f0fdf4",padding:"12px",borderRadius:"8px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{color:"#166534",fontSize:"14px"},children:"Beregnet effektivitet:"}),e.jsxs("span",{style:{color:"#166534",fontWeight:"700",fontSize:"18px"},children:[((o.liceBefore-parseFloat(n.liceAfter))/o.liceBefore*100).toFixed(0),"%"]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"24px"},children:[e.jsx("button",{onClick:()=&gt;I(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid var(--border, #ddd)",background:"transparent",color:"var(--text, #333)",cursor:"pointer"},children:"Avbryt"}),e.jsx("button",{onClick:te,disabled:f,style:{padding:"10px 20px",borderRadius:"6px",border:"none",background:"#22c55e",color:"white",cursor:f?"not-allowed":"pointer",fontWeight:"500",opacity:f?.7:1},children:f?"Lagrer...":"Marker som fullført"})]})]})}),Z&amp;&amp;e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alig</span></span>nItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=&gt;D(!1),children:e.jsxs("div",{style:{background:"var(--panel, white)",borderRadius:"12px",padding:"30px",width:"500px",maxWidth:"90%"},onClick:t=&gt;t.stopPropagation(),children:[e.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",marginBottom:"20px",color:"var(--text, #333)"},children:"Ny behandling"}),T&amp;&amp;e.jsx("div",{style:{padding:"10px",background:"#fef2f2",color:"#dc2626",borderRadius:"6px",marginBottom:"16px",fontSize:"14px"},children:T}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Merd *"}),e.jsxs("select",{value:r.merdId,onChange:t=&gt;{k({...r,merdId:t.target.value}),v({...y,merdId:null})},style:{...p,borderColor:y.merdId?"#ef4444":void 0},required:!0,children:[e.jsx("option",{value:"",children:"Velg merd..."}),J.map(t=&gt;e.jsxs("option",{value:t.id,children:[t.cage_name||t.name," - ",t.locality||t.lokalitet]},t.id))]}),y.merdId&amp;&amp;e.jsx("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:y.merdId})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Behandlingstype *"}),e.jsxs("select",{value:r.treatmentType,onChange:t=&gt;k({...r,treatmentType:t.target.value}),style:p,children:[e.jsx("option",{value:"THERMOLICER",children:"Thermolicer"}),e.jsx("option",{value:"HYDROLICER",children:"Hydrolicer"}),e.jsx("option",{value:"OPTILICER",children:"Optilicer"}),e.jsx("option",{value:"LUSESKJORT",children:"Luseskjørt"}),e.jsx("option",{value:"RENSEFISK",children:"Rensefisk"}),e.jsx("option",{value:"MEDIKAMENTELL",children:"Medikamentell"}),e.jsx("option",{value:"FERSKVANN",children:"Ferskvann"}),e.jsx("option",{value:"LASER",children:"Laser"}),e.jsx("option",{value:"ANNET",children:"Annet"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Dato *"}),e.jsx("input",{type:"date",value:r.scheduledDate,onChange:t=&gt;{k({...r,scheduledDate:t.target.value}),v({...y,scheduledDate:null})},style:{...p,borderColor:y.scheduledDate?"#ef4444":void 0},required:!0}),y.scheduledDate&amp;&amp;e.jsx("div",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:y.scheduledDate})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Tidspunkt"}),e.jsx("input",{type:"time",value:r.scheduledTime,onChange:t=&gt;k({...r,scheduledTime:t.target.value}),style:p})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Nåværende lusenivå (valgfritt)"}),e.jsx("input",{type:"number",step:"0.01",value:r.liceBefore,onChange:t=&gt;k({...r,liceBefore:t.target.value}),style:p,placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{style:x,children:"Notater"}),e.jsx("textarea",{value:r.notes,onChange:t=&gt;k({...r,notes:t.target.value}),style:{...p,minHeight:"80px",resize:"vertical"},placeholder:"Valgfrie notater..."})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end",marginTop:"24px"},children:[e.jsx("button",{onClick:()=&gt;D(!1),style:{padding:"10px 20px",borderRadius:"6px",border:"1px solid var(--border, #ddd)",background:"transparent",color:"var(--text, #333)",cursor:"pointer"},children:"Avbryt"}),e.jsx("button",{onClick:re,disabled:f||!r.merdId||!r.scheduledDate,className:"btn btn-primary",style:{opacity:f||!r.merdId||!r.scheduledDate?.7:1},children:f?"Lagrer...":"Opprett behandling"})]})]})})]})}export{oe as default};</span>
&nbsp;</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2026-02-11T16:07:30.331Z
            </div>
        <script src="../../../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../../../sorter.js"></script>
        <script src="../../../../../block-navigation.js"></script>
    </body>
</html>
    